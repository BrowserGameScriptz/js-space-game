function DB_Building(a){var b=this;b.id=ko.observable(a.id),b.name=ko.observable(a.name),b.description=ko.observable(a.description),b.buildTime=ko.observable(a.buildTime),b.buildTimeMultiplier=ko.observable(a.buildTimeMultiplier),b.powerMultiplier=ko.observable(a.powerMultiplier),b.resourceMultiplier=ko.observable(a.resourceMultiplier),b.powers=ko.observableArray(),b.resources=ko.observableArray(),$.each(a.powers,function(a,c){b.powers.push(new DB_BuildingResource(c))}),$.each(a.resources,function(a,c){b.resources.push(new DB_BuildingResource(c))}),b.realBuildTime=ko.computed(function(){var a=SpaceGame.calculat_build_time(b.buildTime(),b.buildTimeMultiplier(),0);return a}),b.buildTimeText=ko.computed(function(){return"build time: "+SpaceGame.buildTimeString(b.realBuildTime())}),b.startBuilding=function(a,b){console.log("addNewUserBuilding",b,a);var c=(new Date).getTime();SpaceGame.apiStatus("fetch"),$.ajax({url:"api/add_edit_user_building.php",data:{buildingid:a.id(),userbuildingid:"",level:"0",timestamp:c},cache:!1}).done(function(b){console.log(b);var d=JSON3.parse(b);SpaceGame.user_buildings.push(new USER_Building(a,!1,c,d.userBuildingId,0)),SpaceGame.apiStatus("done")}).error(function(a){console.log("NEW AJAX ERROR!",a)})}}function DB_BuildingResource(a){var b=this;b.resourceId=ko.observable(a.resourceId),b.value=ko.observable(a.value)}function DB_Resource(a){var b=this;b.id=ko.observable(a.id),b.name=ko.observable(a.name),b.description=ko.observable(a.description)}function USER_Building(a,b,c,d,e){var f=this;if(b?console.log("USER_Building fromDb"):console.log("USER_Building from knockoutObject"),f.id=ko.observable(a.id()),f.userBuildingId=ko.observable(d),f.level=ko.observable(parseInt(e)),f.name=ko.observable(a.name()),f.description=ko.observable(a.description()),f.buildTime=ko.observable(a.buildTime()),f.buildTimeMultiplier=ko.observable(a.buildTimeMultiplier()),f.powerMultiplier=ko.observable(a.powerMultiplier()),f.resourceMultiplier=ko.observable(a.resourceMultiplier()),f.powers=ko.observableArray(),f.resources=ko.observableArray(),$.each(a.powers(),function(a,b){f.powers.push(new DB_BuildingResource(b))}),$.each(a.resources(),function(a,b){f.resources.push(new DB_BuildingResource(b))}),f.realBuildTime=ko.computed(function(){var a=SpaceGame.calculat_build_time(f.buildTime(),f.buildTimeMultiplier(),f.level());return a}),f.buildTimeText=ko.computed(function(){return"upgrade time: "+SpaceGame.buildTimeString(f.realBuildTime())}),f.upgradeStartTime=ko.observable(parseInt(c)),f.timerId=0,f.elapsedTime=ko.observable(0),f.initialTime=ko.computed(function(){return f.realBuildTime()}),f.remainingTime=ko.computed(function(){return f.initialTime()-f.elapsedTime()}),f.remainingTimeText=ko.computed(function(){return SpaceGame.buildTimeString(f.remainingTime())}),f.isRunning=ko.observable(!1),f.progressWidth=ko.computed(function(){var a=(100*f.elapsedTime()/f.initialTime()).toFixed(0),b=f.isRunning()?"background: -moz-linear-gradient(left,  #d0d0d0 0%, #d0d0d0 "+parseInt(a)+"%, rgba(255,255,255, 0.45) "+(parseInt(a)+1)+"%, rgba(255,255,255, 0.45) 100%);background: -webkit-linear-gradient(left,  #d0d0d0 0%, #d0d0d0 "+parseInt(a)+"%, rgba(255,255,255, 0.45) "+(parseInt(a)+1)+"%, rgba(255,255,255, 0.45) 100%);background: linear-gradient(to right,  #d0d0d0 0%, #d0d0d0 "+parseInt(a)+"%, rgba(255,255,255, 0.45) "+(parseInt(a)+1)+"%, rgba(255,255,255, 0.45) 100%);":"";return b}),f.StartCounter=function(a,b){a===!0&&(console.log("new Building timer!"),SpaceGame.apiStatus("fetch"),$.ajax({url:"api/start_upgrade_user_building.php",data:{userbuildingid:f.userBuildingId(),startBuildingTime:(new Date).getTime()},cache:!1}).done(function(a){console.log(a),JSON3.parse(a),SpaceGame.apiStatus("done"),console.log("started!!")}).error(function(a){console.log("NEW AJAX ERROR!",a)})),f.elapsedTime(b),f.isRunning(!0),f.timerId=window.setInterval(function(){f.elapsedTime(f.elapsedTime()+1),f.remainingTime()<=0&&(clearInterval(f.timerId),f.isRunning(!1),f.UpgradeBuilding())},1e3)},f.StopCounter=function(){clearInterval(f.timerId),f.isRunning(!1)},f.UpgradeBuilding=function(){f.level(f.level()+1),SpaceGame.apiStatus("fetch"),$.ajax({url:"api/upgrade_user_building.php",data:{userbuildingid:f.userBuildingId(),level:f.level()},cache:!1}).done(function(a){console.log(a),JSON3.parse(a),SpaceGame.apiStatus("done"),console.log("upgraded!!")}).error(function(a){console.log("NEW AJAX ERROR!",a)})},0!==f.upgradeStartTime()){var g=(new Date).getTime();if(g-(f.upgradeStartTime()+1e3*f.realBuildTime())<0){console.log("buildtime:",(new Date).getTime()-(f.upgradeStartTime()+1e3*f.realBuildTime()));var h=parseInt((g-f.upgradeStartTime())/1e3);f.StartCounter(!1,h)}else f.UpgradeBuilding()}}function DB_Building(a){var b=this;b.id=ko.observable(a.id),b.name=ko.observable(a.name),b.description=ko.observable(a.description),b.buildTime=ko.observable(a.buildTime),b.buildTimeMultiplier=ko.observable(a.buildTimeMultiplier),b.powerMultiplier=ko.observable(a.powerMultiplier),b.resourceMultiplier=ko.observable(a.resourceMultiplier),b.powers=ko.observableArray(),b.resources=ko.observableArray(),$.each(a.powers,function(a,c){b.powers.push(new DB_BuildingResource(c))}),$.each(a.resources,function(a,c){b.resources.push(new DB_BuildingResource(c))}),b.realBuildTime=ko.computed(function(){var a=SpaceGame.calculat_build_time(b.buildTime(),b.buildTimeMultiplier(),0);return a}),b.buildTimeText=ko.computed(function(){return"build time: "+SpaceGame.buildTimeString(b.realBuildTime())}),b.startBuilding=function(a,b){console.log("addNewUserBuilding",b,a);var c=(new Date).getTime();SpaceGame.apiStatus("fetch"),$.ajax({url:"api/add_edit_user_building.php",data:{buildingid:a.id(),userbuildingid:"",level:"0",timestamp:c},cache:!1}).done(function(b){console.log(b);var d=JSON3.parse(b);SpaceGame.user_buildings.push(new USER_Building(a,!1,c,d.userBuildingId,0)),SpaceGame.apiStatus("done")}).error(function(a){console.log("NEW AJAX ERROR!",a)})}}function DB_BuildingResource(a){var b=this;b.resourceId=ko.observable(a.resourceId),b.value=ko.observable(a.value)}function DB_Resource(a){var b=this;b.id=ko.observable(a.id),b.name=ko.observable(a.name),b.description=ko.observable(a.description)}function USER_Building(a,b,c,d,e){var f=this;if(b?console.log("USER_Building fromDb"):console.log("USER_Building from knockoutObject"),f.id=ko.observable(a.id()),f.userBuildingId=ko.observable(d),f.level=ko.observable(parseInt(e)),f.name=ko.observable(a.name()),f.description=ko.observable(a.description()),f.buildTime=ko.observable(a.buildTime()),f.buildTimeMultiplier=ko.observable(a.buildTimeMultiplier()),f.powerMultiplier=ko.observable(a.powerMultiplier()),f.resourceMultiplier=ko.observable(a.resourceMultiplier()),f.powers=ko.observableArray(),f.resources=ko.observableArray(),$.each(a.powers(),function(a,b){f.powers.push(new DB_BuildingResource(b))}),$.each(a.resources(),function(a,b){f.resources.push(new DB_BuildingResource(b))}),f.realBuildTime=ko.computed(function(){var a=SpaceGame.calculat_build_time(f.buildTime(),f.buildTimeMultiplier(),f.level());return a}),f.buildTimeText=ko.computed(function(){return"upgrade time: "+SpaceGame.buildTimeString(f.realBuildTime())}),f.upgradeStartTime=ko.observable(parseInt(c)),f.timerId=0,f.elapsedTime=ko.observable(0),f.initialTime=ko.computed(function(){return f.realBuildTime()}),f.remainingTime=ko.computed(function(){return f.initialTime()-f.elapsedTime()}),f.remainingTimeText=ko.computed(function(){return SpaceGame.buildTimeString(f.remainingTime())}),f.isRunning=ko.observable(!1),f.progressWidth=ko.computed(function(){var a=(100*f.elapsedTime()/f.initialTime()).toFixed(0),b=f.isRunning()?"background: -moz-linear-gradient(left,  #d0d0d0 0%, #d0d0d0 "+parseInt(a)+"%, rgba(255,255,255, 0.45) "+(parseInt(a)+1)+"%, rgba(255,255,255, 0.45) 100%);background: -webkit-linear-gradient(left,  #d0d0d0 0%, #d0d0d0 "+parseInt(a)+"%, rgba(255,255,255, 0.45) "+(parseInt(a)+1)+"%, rgba(255,255,255, 0.45) 100%);background: linear-gradient(to right,  #d0d0d0 0%, #d0d0d0 "+parseInt(a)+"%, rgba(255,255,255, 0.45) "+(parseInt(a)+1)+"%, rgba(255,255,255, 0.45) 100%);":"";return b}),f.StartCounter=function(a,b){a===!0&&(console.log("new Building timer!"),SpaceGame.apiStatus("fetch"),$.ajax({url:"api/start_upgrade_user_building.php",data:{userbuildingid:f.userBuildingId(),startBuildingTime:(new Date).getTime()},cache:!1}).done(function(a){console.log(a),JSON3.parse(a),SpaceGame.apiStatus("done"),console.log("started!!")}).error(function(a){console.log("NEW AJAX ERROR!",a)})),f.elapsedTime(b),f.isRunning(!0),f.timerId=window.setInterval(function(){f.elapsedTime(f.elapsedTime()+1),f.remainingTime()<=0&&(clearInterval(f.timerId),f.isRunning(!1),f.UpgradeBuilding())},1e3)},f.StopCounter=function(){clearInterval(f.timerId),f.isRunning(!1)},f.UpgradeBuilding=function(){f.level(f.level()+1),SpaceGame.apiStatus("fetch"),$.ajax({url:"api/upgrade_user_building.php",data:{userbuildingid:f.userBuildingId(),level:f.level()},cache:!1}).done(function(a){console.log(a),JSON3.parse(a),SpaceGame.apiStatus("done"),console.log("upgraded!!")}).error(function(a){console.log("NEW AJAX ERROR!",a)})},0!==f.upgradeStartTime()){var g=(new Date).getTime();if(g-(f.upgradeStartTime()+1e3*f.realBuildTime())<0){console.log("buildtime:",(new Date).getTime()-(f.upgradeStartTime()+1e3*f.realBuildTime()));var h=parseInt((g-f.upgradeStartTime())/1e3);f.StartCounter(!1,h)}else f.UpgradeBuilding()}}function DB_Building(a){var b=this;b.id=ko.observable(a.id),b.name=ko.observable(a.name),b.description=ko.observable(a.description),b.buildTime=ko.observable(a.buildTime),b.buildTimeMultiplier=ko.observable(a.buildTimeMultiplier),b.powerMultiplier=ko.observable(a.powerMultiplier),b.resourceMultiplier=ko.observable(a.resourceMultiplier),b.powers=ko.observableArray(),b.resources=ko.observableArray(),$.each(a.powers,function(a,c){b.powers.push(new DB_BuildingResource(c))}),$.each(a.resources,function(a,c){b.resources.push(new DB_BuildingResource(c))}),b.realBuildTime=ko.computed(function(){var a=SpaceGame.calculat_build_time(b.buildTime(),b.buildTimeMultiplier(),0);return a}),b.buildTimeText=ko.computed(function(){return"build time: "+SpaceGame.buildTimeString(b.realBuildTime())}),b.startBuilding=function(a,b){console.log("addNewUserBuilding",b,a);var c=(new Date).getTime();SpaceGame.apiStatus("fetch"),$.ajax({url:"api/add_edit_user_building.php",data:{buildingid:a.id(),userbuildingid:"",level:"0",timestamp:c},cache:!1}).done(function(b){console.log(b);var d=JSON3.parse(b);SpaceGame.user_buildings.push(new USER_Building(a,!1,c,d.userBuildingId,0)),SpaceGame.apiStatus("done")}).error(function(a){console.log("NEW AJAX ERROR!",a)})}}function DB_BuildingResource(a){var b=this;b.resourceId=ko.observable(a.resourceId),b.value=ko.observable(a.value)}function DB_Resource(a){var b=this;b.id=ko.observable(a.id),b.name=ko.observable(a.name),b.description=ko.observable(a.description)}function USER_Building(a,b,c,d,e){var f=this;if(b?console.log("USER_Building fromDb"):console.log("USER_Building from knockoutObject"),f.id=ko.observable(a.id()),f.userBuildingId=ko.observable(d),f.level=ko.observable(parseInt(e)),f.name=ko.observable(a.name()),f.description=ko.observable(a.description()),f.buildTime=ko.observable(a.buildTime()),f.buildTimeMultiplier=ko.observable(a.buildTimeMultiplier()),f.powerMultiplier=ko.observable(a.powerMultiplier()),f.resourceMultiplier=ko.observable(a.resourceMultiplier()),f.powers=ko.observableArray(),f.resources=ko.observableArray(),$.each(a.powers(),function(a,b){f.powers.push(new DB_BuildingResource(b))}),$.each(a.resources(),function(a,b){f.resources.push(new DB_BuildingResource(b))}),f.realBuildTime=ko.computed(function(){var a=SpaceGame.calculat_build_time(f.buildTime(),f.buildTimeMultiplier(),f.level());return a}),f.buildTimeText=ko.computed(function(){return"upgrade time: "+SpaceGame.buildTimeString(f.realBuildTime())}),f.upgradeStartTime=ko.observable(parseInt(c)),f.timerId=0,f.elapsedTime=ko.observable(0),f.initialTime=ko.computed(function(){return f.realBuildTime()}),f.remainingTime=ko.computed(function(){return f.initialTime()-f.elapsedTime()}),f.remainingTimeText=ko.computed(function(){return SpaceGame.buildTimeString(f.remainingTime())}),f.isRunning=ko.observable(!1),f.progressWidth=ko.computed(function(){var a=(100*f.elapsedTime()/f.initialTime()).toFixed(0),b=f.isRunning()?"background: -moz-linear-gradient(left,  #d0d0d0 0%, #d0d0d0 "+parseInt(a)+"%, rgba(255,255,255, 0.45) "+(parseInt(a)+1)+"%, rgba(255,255,255, 0.45) 100%);background: -webkit-linear-gradient(left,  #d0d0d0 0%, #d0d0d0 "+parseInt(a)+"%, rgba(255,255,255, 0.45) "+(parseInt(a)+1)+"%, rgba(255,255,255, 0.45) 100%);background: linear-gradient(to right,  #d0d0d0 0%, #d0d0d0 "+parseInt(a)+"%, rgba(255,255,255, 0.45) "+(parseInt(a)+1)+"%, rgba(255,255,255, 0.45) 100%);":"";return b}),f.StartCounter=function(a,b){a===!0&&(console.log("new Building timer!"),SpaceGame.apiStatus("fetch"),$.ajax({url:"api/start_upgrade_user_building.php",data:{userbuildingid:f.userBuildingId(),startBuildingTime:(new Date).getTime()},cache:!1}).done(function(a){console.log(a),JSON3.parse(a),SpaceGame.apiStatus("done"),console.log("started!!")}).error(function(a){console.log("NEW AJAX ERROR!",a)})),f.elapsedTime(b),f.isRunning(!0),f.timerId=window.setInterval(function(){f.elapsedTime(f.elapsedTime()+1),f.remainingTime()<=0&&(clearInterval(f.timerId),f.isRunning(!1),f.UpgradeBuilding())},1e3)},f.StopCounter=function(){clearInterval(f.timerId),f.isRunning(!1)},f.UpgradeBuilding=function(){f.level(f.level()+1),SpaceGame.apiStatus("fetch"),$.ajax({url:"api/upgrade_user_building.php",data:{userbuildingid:f.userBuildingId(),level:f.level()},cache:!1}).done(function(a){console.log(a),JSON3.parse(a),SpaceGame.apiStatus("done"),console.log("upgraded!!")}).error(function(a){console.log("NEW AJAX ERROR!",a)})},0!==f.upgradeStartTime()){var g=(new Date).getTime();if(g-(f.upgradeStartTime()+1e3*f.realBuildTime())<0){console.log("buildtime:",(new Date).getTime()-(f.upgradeStartTime()+1e3*f.realBuildTime()));var h=parseInt((g-f.upgradeStartTime())/1e3);f.StartCounter(!1,h)}else f.UpgradeBuilding()}}function DB_Building(a){var b=this;b.id=ko.observable(a.id),b.name=ko.observable(a.name),b.description=ko.observable(a.description),b.buildTime=ko.observable(a.buildTime),b.buildTimeMultiplier=ko.observable(a.buildTimeMultiplier),b.powerMultiplier=ko.observable(a.powerMultiplier),b.resourceMultiplier=ko.observable(a.resourceMultiplier),b.powers=ko.observableArray(),b.resources=ko.observableArray(),$.each(a.powers,function(a,c){b.powers.push(new DB_BuildingResource(c))}),$.each(a.resources,function(a,c){b.resources.push(new DB_BuildingResource(c))}),b.realBuildTime=ko.computed(function(){var a=SpaceGame.calculat_build_time(b.buildTime(),b.buildTimeMultiplier(),0);return a}),b.buildTimeText=ko.computed(function(){return"build time: "+SpaceGame.buildTimeString(b.realBuildTime())}),b.startBuilding=function(a,b){console.log("addNewUserBuilding",b,a);var c=(new Date).getTime();SpaceGame.apiStatus("fetch"),$.ajax({url:"api/add_edit_user_building.php",data:{buildingid:a.id(),userbuildingid:"",level:"0",timestamp:c},cache:!1}).done(function(b){console.log(b);var d=JSON3.parse(b);SpaceGame.user_buildings.push(new USER_Building(a,!1,c,d.userBuildingId,0)),SpaceGame.apiStatus("done")}).error(function(a){console.log("NEW AJAX ERROR!",a)})}}function DB_BuildingResource(a){var b=this;b.resourceId=ko.observable(a.resourceId),b.value=ko.observable(a.value)}function DB_Resource(a){var b=this;b.id=ko.observable(a.id),b.name=ko.observable(a.name),b.description=ko.observable(a.description)}function USER_Building(a,b,c,d,e){var f=this;if(b?console.log("USER_Building fromDb"):console.log("USER_Building from knockoutObject"),f.id=ko.observable(a.id()),f.userBuildingId=ko.observable(d),f.level=ko.observable(parseInt(e)),f.name=ko.observable(a.name()),f.description=ko.observable(a.description()),f.buildTime=ko.observable(a.buildTime()),f.buildTimeMultiplier=ko.observable(a.buildTimeMultiplier()),f.powerMultiplier=ko.observable(a.powerMultiplier()),f.resourceMultiplier=ko.observable(a.resourceMultiplier()),f.powers=ko.observableArray(),f.resources=ko.observableArray(),$.each(a.powers(),function(a,b){f.powers.push(new DB_BuildingResource(b))}),$.each(a.resources(),function(a,b){f.resources.push(new DB_BuildingResource(b))}),f.realBuildTime=ko.computed(function(){var a=SpaceGame.calculat_build_time(f.buildTime(),f.buildTimeMultiplier(),f.level());return a}),f.buildTimeText=ko.computed(function(){return"upgrade time: "+SpaceGame.buildTimeString(f.realBuildTime())}),f.upgradeStartTime=ko.observable(parseInt(c)),f.timerId=0,f.elapsedTime=ko.observable(0),f.initialTime=ko.computed(function(){return f.realBuildTime()}),f.remainingTime=ko.computed(function(){return f.initialTime()-f.elapsedTime()}),f.remainingTimeText=ko.computed(function(){return SpaceGame.buildTimeString(f.remainingTime())}),f.isRunning=ko.observable(!1),f.progressWidth=ko.computed(function(){var a=(100*f.elapsedTime()/f.initialTime()).toFixed(0),b=f.isRunning()?"background: -moz-linear-gradient(left,  #d0d0d0 0%, #d0d0d0 "+parseInt(a)+"%, rgba(255,255,255, 0.45) "+(parseInt(a)+1)+"%, rgba(255,255,255, 0.45) 100%);background: -webkit-linear-gradient(left,  #d0d0d0 0%, #d0d0d0 "+parseInt(a)+"%, rgba(255,255,255, 0.45) "+(parseInt(a)+1)+"%, rgba(255,255,255, 0.45) 100%);background: linear-gradient(to right,  #d0d0d0 0%, #d0d0d0 "+parseInt(a)+"%, rgba(255,255,255, 0.45) "+(parseInt(a)+1)+"%, rgba(255,255,255, 0.45) 100%);":"";return b}),f.StartCounter=function(a,b){a===!0&&(console.log("new Building timer!"),SpaceGame.apiStatus("fetch"),$.ajax({url:"api/start_upgrade_user_building.php",data:{userbuildingid:f.userBuildingId(),startBuildingTime:(new Date).getTime()},cache:!1}).done(function(a){console.log(a),JSON3.parse(a),SpaceGame.apiStatus("done"),console.log("started!!")}).error(function(a){console.log("NEW AJAX ERROR!",a)})),f.elapsedTime(b),f.isRunning(!0),f.timerId=window.setInterval(function(){f.elapsedTime(f.elapsedTime()+1),f.remainingTime()<=0&&(clearInterval(f.timerId),f.isRunning(!1),f.UpgradeBuilding())},1e3)},f.StopCounter=function(){clearInterval(f.timerId),f.isRunning(!1)},f.UpgradeBuilding=function(){f.level(f.level()+1),SpaceGame.apiStatus("fetch"),$.ajax({url:"api/upgrade_user_building.php",data:{userbuildingid:f.userBuildingId(),level:f.level()},cache:!1}).done(function(a){console.log(a),JSON3.parse(a),SpaceGame.apiStatus("done"),console.log("upgraded!!")}).error(function(a){console.log("NEW AJAX ERROR!",a)})},0!==f.upgradeStartTime()){var g=(new Date).getTime();if(g-(f.upgradeStartTime()+1e3*f.realBuildTime())<0){console.log("buildtime:",(new Date).getTime()-(f.upgradeStartTime()+1e3*f.realBuildTime()));var h=parseInt((g-f.upgradeStartTime())/1e3);f.StartCounter(!1,h)}else f.UpgradeBuilding()}}function DB_Building(a){var b=this;b.id=ko.observable(a.id),b.name=ko.observable(a.name),b.description=ko.observable(a.description),b.buildTime=ko.observable(a.buildTime),b.buildTimeMultiplier=ko.observable(a.buildTimeMultiplier),b.powerMultiplier=ko.observable(a.powerMultiplier),b.resourceMultiplier=ko.observable(a.resourceMultiplier),b.powers=ko.observableArray(),b.resources=ko.observableArray(),$.each(a.powers,function(a,c){b.powers.push(new DB_BuildingResource(c))}),$.each(a.resources,function(a,c){b.resources.push(new DB_BuildingResource(c))}),b.realBuildTime=ko.computed(function(){var a=SpaceGame.calculat_build_time(b.buildTime(),b.buildTimeMultiplier(),0);return a}),b.buildTimeText=ko.computed(function(){return"build time: "+SpaceGame.buildTimeString(b.realBuildTime())}),b.startBuilding=function(a,b){console.log("addNewUserBuilding",b,a);var c=(new Date).getTime();SpaceGame.apiStatus("fetch"),$.ajax({url:"api/add_edit_user_building.php",data:{buildingid:a.id(),userbuildingid:"",level:"0",timestamp:c},cache:!1}).done(function(b){console.log(b);var d=JSON3.parse(b);SpaceGame.user_buildings.push(new USER_Building(a,!1,c,d.userBuildingId,0)),SpaceGame.apiStatus("done")}).error(function(a){console.log("NEW AJAX ERROR!",a)})}}function DB_BuildingResource(a){var b=this;b.resourceId=ko.observable(a.resourceId),b.value=ko.observable(a.value)}function DB_Resource(a){var b=this;b.id=ko.observable(a.id),b.name=ko.observable(a.name),b.description=ko.observable(a.description)}function USER_Building(a,b,c,d,e){var f=this;if(b?console.log("USER_Building fromDb"):console.log("USER_Building from knockoutObject"),f.id=ko.observable(a.id()),f.userBuildingId=ko.observable(d),f.level=ko.observable(parseInt(e)),f.name=ko.observable(a.name()),f.description=ko.observable(a.description()),f.buildTime=ko.observable(a.buildTime()),f.buildTimeMultiplier=ko.observable(a.buildTimeMultiplier()),f.powerMultiplier=ko.observable(a.powerMultiplier()),f.resourceMultiplier=ko.observable(a.resourceMultiplier()),f.powers=ko.observableArray(),f.resources=ko.observableArray(),$.each(a.powers(),function(a,b){f.powers.push(new DB_BuildingResource(b))}),$.each(a.resources(),function(a,b){f.resources.push(new DB_BuildingResource(b))}),f.realBuildTime=ko.computed(function(){var a=SpaceGame.calculat_build_time(f.buildTime(),f.buildTimeMultiplier(),f.level());return a}),f.buildTimeText=ko.computed(function(){return"upgrade time: "+SpaceGame.buildTimeString(f.realBuildTime())}),f.upgradeStartTime=ko.observable(parseInt(c)),f.timerId=0,f.elapsedTime=ko.observable(0),f.initialTime=ko.computed(function(){return f.realBuildTime()}),f.remainingTime=ko.computed(function(){return f.initialTime()-f.elapsedTime()}),f.remainingTimeText=ko.computed(function(){return SpaceGame.buildTimeString(f.remainingTime())}),f.isRunning=ko.observable(!1),f.progressWidth=ko.computed(function(){var a=(100*f.elapsedTime()/f.initialTime()).toFixed(0),b=f.isRunning()?"background: -moz-linear-gradient(left,  #d0d0d0 0%, #d0d0d0 "+parseInt(a)+"%, rgba(255,255,255, 0.45) "+(parseInt(a)+1)+"%, rgba(255,255,255, 0.45) 100%);background: -webkit-linear-gradient(left,  #d0d0d0 0%, #d0d0d0 "+parseInt(a)+"%, rgba(255,255,255, 0.45) "+(parseInt(a)+1)+"%, rgba(255,255,255, 0.45) 100%);background: linear-gradient(to right,  #d0d0d0 0%, #d0d0d0 "+parseInt(a)+"%, rgba(255,255,255, 0.45) "+(parseInt(a)+1)+"%, rgba(255,255,255, 0.45) 100%);":"";return b}),f.StartCounter=function(a,b){a===!0&&(console.log("new Building timer!"),SpaceGame.apiStatus("fetch"),$.ajax({url:"api/start_upgrade_user_building.php",data:{userbuildingid:f.userBuildingId(),startBuildingTime:(new Date).getTime()},cache:!1}).done(function(a){console.log(a),JSON3.parse(a),SpaceGame.apiStatus("done"),console.log("started!!")}).error(function(a){console.log("NEW AJAX ERROR!",a)})),f.elapsedTime(b),f.isRunning(!0),f.timerId=window.setInterval(function(){f.elapsedTime(f.elapsedTime()+1),f.remainingTime()<=0&&(clearInterval(f.timerId),f.isRunning(!1),f.UpgradeBuilding())},1e3)},f.StopCounter=function(){clearInterval(f.timerId),f.isRunning(!1)},f.UpgradeBuilding=function(){f.level(f.level()+1),SpaceGame.apiStatus("fetch"),$.ajax({url:"api/upgrade_user_building.php",data:{userbuildingid:f.userBuildingId(),level:f.level()},cache:!1}).done(function(a){console.log(a),JSON3.parse(a),SpaceGame.apiStatus("done"),console.log("upgraded!!")}).error(function(a){console.log("NEW AJAX ERROR!",a)})},0!==f.upgradeStartTime()){var g=(new Date).getTime();if(g-(f.upgradeStartTime()+1e3*f.realBuildTime())<0){console.log("buildtime:",(new Date).getTime()-(f.upgradeStartTime()+1e3*f.realBuildTime()));var h=parseInt((g-f.upgradeStartTime())/1e3);f.StartCounter(!1,h)}else f.UpgradeBuilding()}}function DB_Building(a){var b=this;b.id=ko.observable(a.id),b.name=ko.observable(a.name),b.description=ko.observable(a.description),b.buildTime=ko.observable(a.buildTime),b.buildTimeMultiplier=ko.observable(a.buildTimeMultiplier),b.powerMultiplier=ko.observable(a.powerMultiplier),b.resourceMultiplier=ko.observable(a.resourceMultiplier),b.powers=ko.observableArray(),b.resources=ko.observableArray(),$.each(a.powers,function(a,c){b.powers.push(new DB_BuildingResource(c))}),$.each(a.resources,function(a,c){b.resources.push(new DB_BuildingResource(c))}),b.realBuildTime=ko.computed(function(){var a=SpaceGame.calculat_build_time(b.buildTime(),b.buildTimeMultiplier(),0);return a}),b.buildTimeText=ko.computed(function(){return"build time: "+SpaceGame.buildTimeString(b.realBuildTime())}),b.startBuilding=function(a,b){console.log("addNewUserBuilding",b,a);var c=(new Date).getTime();SpaceGame.apiStatus("fetch"),$.ajax({url:"api/add_edit_user_building.php",data:{buildingid:a.id(),userbuildingid:"",level:"0",timestamp:c},cache:!1}).done(function(b){console.log(b);var d=JSON3.parse(b);SpaceGame.user_buildings.push(new USER_Building(a,!1,c,d.userBuildingId,0)),SpaceGame.apiStatus("done")}).error(function(a){console.log("NEW AJAX ERROR!",a)})}}function DB_BuildingResource(a){var b=this;b.resourceId=ko.observable(a.resourceId),b.value=ko.observable(a.value)}function DB_Resource(a){var b=this;b.id=ko.observable(a.id),b.name=ko.observable(a.name),b.description=ko.observable(a.description)}function USER_Building(a,b,c,d,e){var f=this;if(b?console.log("USER_Building fromDb"):console.log("USER_Building from knockoutObject"),f.id=ko.observable(a.id()),f.userBuildingId=ko.observable(d),f.level=ko.observable(parseInt(e)),f.name=ko.observable(a.name()),f.description=ko.observable(a.description()),f.buildTime=ko.observable(a.buildTime()),f.buildTimeMultiplier=ko.observable(a.buildTimeMultiplier()),f.powerMultiplier=ko.observable(a.powerMultiplier()),f.resourceMultiplier=ko.observable(a.resourceMultiplier()),f.powers=ko.observableArray(),f.resources=ko.observableArray(),$.each(a.powers(),function(a,b){f.powers.push(new DB_BuildingResource(b))}),$.each(a.resources(),function(a,b){f.resources.push(new DB_BuildingResource(b))}),f.realBuildTime=ko.computed(function(){var a=SpaceGame.calculat_build_time(f.buildTime(),f.buildTimeMultiplier(),f.level());return a}),f.buildTimeText=ko.computed(function(){return"upgrade time: "+SpaceGame.buildTimeString(f.realBuildTime())}),f.upgradeStartTime=ko.observable(parseInt(c)),f.timerId=0,f.elapsedTime=ko.observable(0),f.initialTime=ko.computed(function(){return f.realBuildTime()}),f.remainingTime=ko.computed(function(){return f.initialTime()-f.elapsedTime()}),f.remainingTimeText=ko.computed(function(){return SpaceGame.buildTimeString(f.remainingTime())}),f.isRunning=ko.observable(!1),f.progressWidth=ko.computed(function(){var a=(100*f.elapsedTime()/f.initialTime()).toFixed(0),b=f.isRunning()?"background: -moz-linear-gradient(left,  #d0d0d0 0%, #d0d0d0 "+parseInt(a)+"%, rgba(255,255,255, 0.45) "+(parseInt(a)+1)+"%, rgba(255,255,255, 0.45) 100%);background: -webkit-linear-gradient(left,  #d0d0d0 0%, #d0d0d0 "+parseInt(a)+"%, rgba(255,255,255, 0.45) "+(parseInt(a)+1)+"%, rgba(255,255,255, 0.45) 100%);background: linear-gradient(to right,  #d0d0d0 0%, #d0d0d0 "+parseInt(a)+"%, rgba(255,255,255, 0.45) "+(parseInt(a)+1)+"%, rgba(255,255,255, 0.45) 100%);":"";return b}),f.StartCounter=function(a,b){a===!0&&(console.log("new Building timer!"),SpaceGame.apiStatus("fetch"),$.ajax({url:"api/start_upgrade_user_building.php",data:{userbuildingid:f.userBuildingId(),startBuildingTime:(new Date).getTime()},cache:!1}).done(function(a){console.log(a),JSON3.parse(a),SpaceGame.apiStatus("done"),console.log("started!!")}).error(function(a){console.log("NEW AJAX ERROR!",a)})),f.elapsedTime(b),f.isRunning(!0),f.timerId=window.setInterval(function(){f.elapsedTime(f.elapsedTime()+1),f.remainingTime()<=0&&(clearInterval(f.timerId),f.isRunning(!1),f.UpgradeBuilding())},1e3)},f.StopCounter=function(){clearInterval(f.timerId),f.isRunning(!1)},f.UpgradeBuilding=function(){f.level(f.level()+1),SpaceGame.apiStatus("fetch"),$.ajax({url:"api/upgrade_user_building.php",data:{userbuildingid:f.userBuildingId(),level:f.level()},cache:!1}).done(function(a){console.log(a),JSON3.parse(a),SpaceGame.apiStatus("done"),console.log("upgraded!!")}).error(function(a){console.log("NEW AJAX ERROR!",a)})},0!==f.upgradeStartTime()){var g=(new Date).getTime();if(g-(f.upgradeStartTime()+1e3*f.realBuildTime())<0){console.log("buildtime:",(new Date).getTime()-(f.upgradeStartTime()+1e3*f.realBuildTime()));var h=parseInt((g-f.upgradeStartTime())/1e3);f.StartCounter(!1,h)}else f.UpgradeBuilding()}}function DB_Building(a){var b=this;b.id=ko.observable(a.id),b.name=ko.observable(a.name),b.description=ko.observable(a.description),b.buildTime=ko.observable(a.buildTime),b.buildTimeMultiplier=ko.observable(a.buildTimeMultiplier),b.powerMultiplier=ko.observable(a.powerMultiplier),b.resourceMultiplier=ko.observable(a.resourceMultiplier),b.powers=ko.observableArray(),b.resources=ko.observableArray(),$.each(a.powers,function(a,c){b.powers.push(new DB_BuildingResource(c))}),$.each(a.resources,function(a,c){b.resources.push(new DB_BuildingResource(c))}),b.realBuildTime=ko.computed(function(){var a=SpaceGame.calculat_build_time(b.buildTime(),b.buildTimeMultiplier(),0);return a}),b.buildTimeText=ko.computed(function(){return"build time: "+SpaceGame.buildTimeString(b.realBuildTime())}),b.startBuilding=function(a,b){console.log("addNewUserBuilding",b,a);var c=(new Date).getTime();SpaceGame.apiStatus("fetch"),$.ajax({url:"api/add_edit_user_building.php",data:{buildingid:a.id(),userbuildingid:"",level:"0",timestamp:c},cache:!1}).done(function(b){console.log(b);var d=JSON3.parse(b);SpaceGame.user_buildings.push(new USER_Building(a,!1,c,d.userBuildingId,0)),SpaceGame.apiStatus("done")}).error(function(a){console.log("NEW AJAX ERROR!",a)})}}function DB_BuildingResource(a){var b=this;b.resourceId=ko.observable(a.resourceId),b.value=ko.observable(a.value)}function DB_Resource(a){var b=this;b.id=ko.observable(a.id),b.name=ko.observable(a.name),b.description=ko.observable(a.description)}function USER_Building(a,b,c,d,e){var f=this;if(b?console.log("USER_Building fromDb"):console.log("USER_Building from knockoutObject"),f.id=ko.observable(a.id()),f.userBuildingId=ko.observable(d),f.level=ko.observable(parseInt(e)),f.name=ko.observable(a.name()),f.description=ko.observable(a.description()),f.buildTime=ko.observable(a.buildTime()),f.buildTimeMultiplier=ko.observable(a.buildTimeMultiplier()),f.powerMultiplier=ko.observable(a.powerMultiplier()),f.resourceMultiplier=ko.observable(a.resourceMultiplier()),f.powers=ko.observableArray(),f.resources=ko.observableArray(),$.each(a.powers(),function(a,b){f.powers.push(new DB_BuildingResource(b))}),$.each(a.resources(),function(a,b){f.resources.push(new DB_BuildingResource(b))}),f.realBuildTime=ko.computed(function(){var a=SpaceGame.calculat_build_time(f.buildTime(),f.buildTimeMultiplier(),f.level());return a}),f.buildTimeText=ko.computed(function(){return"upgrade time: "+SpaceGame.buildTimeString(f.realBuildTime())}),f.upgradeStartTime=ko.observable(parseInt(c)),f.timerId=0,f.elapsedTime=ko.observable(0),f.initialTime=ko.computed(function(){return f.realBuildTime()}),f.remainingTime=ko.computed(function(){return f.initialTime()-f.elapsedTime()}),f.remainingTimeText=ko.computed(function(){return SpaceGame.buildTimeString(f.remainingTime())}),f.isRunning=ko.observable(!1),f.progressWidth=ko.computed(function(){var a=(100*f.elapsedTime()/f.initialTime()).toFixed(0),b=f.isRunning()?"background: -moz-linear-gradient(left,  #d0d0d0 0%, #d0d0d0 "+parseInt(a)+"%, rgba(255,255,255, 0.45) "+(parseInt(a)+1)+"%, rgba(255,255,255, 0.45) 100%);background: -webkit-linear-gradient(left,  #d0d0d0 0%, #d0d0d0 "+parseInt(a)+"%, rgba(255,255,255, 0.45) "+(parseInt(a)+1)+"%, rgba(255,255,255, 0.45) 100%);background: linear-gradient(to right,  #d0d0d0 0%, #d0d0d0 "+parseInt(a)+"%, rgba(255,255,255, 0.45) "+(parseInt(a)+1)+"%, rgba(255,255,255, 0.45) 100%);":"";return b}),f.StartCounter=function(a,b){a===!0&&(console.log("new Building timer!"),SpaceGame.apiStatus("fetch"),$.ajax({url:"api/start_upgrade_user_building.php",data:{userbuildingid:f.userBuildingId(),
startBuildingTime:(new Date).getTime()},cache:!1}).done(function(a){console.log(a),JSON3.parse(a),SpaceGame.apiStatus("done"),console.log("started!!")}).error(function(a){console.log("NEW AJAX ERROR!",a)})),f.elapsedTime(b),f.isRunning(!0),f.timerId=window.setInterval(function(){f.elapsedTime(f.elapsedTime()+1),f.remainingTime()<=0&&(clearInterval(f.timerId),f.isRunning(!1),f.UpgradeBuilding())},1e3)},f.StopCounter=function(){clearInterval(f.timerId),f.isRunning(!1)},f.UpgradeBuilding=function(){f.level(f.level()+1),SpaceGame.apiStatus("fetch"),$.ajax({url:"api/upgrade_user_building.php",data:{userbuildingid:f.userBuildingId(),level:f.level()},cache:!1}).done(function(a){console.log(a),JSON3.parse(a),SpaceGame.apiStatus("done"),console.log("upgraded!!")}).error(function(a){console.log("NEW AJAX ERROR!",a)})},0!==f.upgradeStartTime()){var g=(new Date).getTime();if(g-(f.upgradeStartTime()+1e3*f.realBuildTime())<0){console.log("buildtime:",(new Date).getTime()-(f.upgradeStartTime()+1e3*f.realBuildTime()));var h=parseInt((g-f.upgradeStartTime())/1e3);f.StartCounter(!1,h)}else f.UpgradeBuilding()}}function DB_Building(a){var b=this;b.id=ko.observable(a.id),b.name=ko.observable(a.name),b.description=ko.observable(a.description),b.buildTime=ko.observable(a.buildTime),b.buildTimeMultiplier=ko.observable(a.buildTimeMultiplier),b.powerMultiplier=ko.observable(a.powerMultiplier),b.resourceMultiplier=ko.observable(a.resourceMultiplier),b.powers=ko.observableArray(),b.resources=ko.observableArray(),$.each(a.powers,function(a,c){b.powers.push(new DB_BuildingResource(c))}),$.each(a.resources,function(a,c){b.resources.push(new DB_BuildingResource(c))}),b.realBuildTime=ko.computed(function(){var a=SpaceGame.calculat_build_time(b.buildTime(),b.buildTimeMultiplier(),0);return a}),b.buildTimeText=ko.computed(function(){return"build time: "+SpaceGame.buildTimeString(b.realBuildTime())}),b.startBuilding=function(a,b){console.log("addNewUserBuilding",b,a);var c=(new Date).getTime();SpaceGame.apiStatus("fetch"),$.ajax({url:"api/add_edit_user_building.php",data:{buildingid:a.id(),userbuildingid:"",level:"0",timestamp:c},cache:!1}).done(function(b){console.log(b);var d=JSON3.parse(b);SpaceGame.user_buildings.push(new USER_Building(a,!1,c,d.userBuildingId,0)),SpaceGame.apiStatus("done")}).error(function(a){console.log("NEW AJAX ERROR!",a)})}}function DB_BuildingResource(a){var b=this;b.resourceId=ko.observable(a.resourceId),b.value=ko.observable(a.value)}function DB_Resource(a){var b=this;b.id=ko.observable(a.id),b.name=ko.observable(a.name),b.description=ko.observable(a.description)}function USER_Building(a,b,c,d,e){var f=this;if(b?console.log("USER_Building fromDb"):console.log("USER_Building from knockoutObject"),f.id=ko.observable(a.id()),f.userBuildingId=ko.observable(d),f.level=ko.observable(parseInt(e)),f.name=ko.observable(a.name()),f.description=ko.observable(a.description()),f.buildTime=ko.observable(a.buildTime()),f.buildTimeMultiplier=ko.observable(a.buildTimeMultiplier()),f.powerMultiplier=ko.observable(a.powerMultiplier()),f.resourceMultiplier=ko.observable(a.resourceMultiplier()),f.powers=ko.observableArray(),f.resources=ko.observableArray(),$.each(a.powers(),function(a,b){f.powers.push(new DB_BuildingResource(b))}),$.each(a.resources(),function(a,b){f.resources.push(new DB_BuildingResource(b))}),f.realBuildTime=ko.computed(function(){var a=SpaceGame.calculat_build_time(f.buildTime(),f.buildTimeMultiplier(),f.level());return a}),f.buildTimeText=ko.computed(function(){return"upgrade time: "+SpaceGame.buildTimeString(f.realBuildTime())}),f.upgradeStartTime=ko.observable(parseInt(c)),f.timerId=0,f.elapsedTime=ko.observable(0),f.initialTime=ko.computed(function(){return f.realBuildTime()}),f.remainingTime=ko.computed(function(){return f.initialTime()-f.elapsedTime()}),f.remainingTimeText=ko.computed(function(){return SpaceGame.buildTimeString(f.remainingTime())}),f.isRunning=ko.observable(!1),f.progressWidth=ko.computed(function(){var a=(100*f.elapsedTime()/f.initialTime()).toFixed(0),b=f.isRunning()?"background: -moz-linear-gradient(left,  #d0d0d0 0%, #d0d0d0 "+parseInt(a)+"%, rgba(255,255,255, 0.45) "+(parseInt(a)+1)+"%, rgba(255,255,255, 0.45) 100%);background: -webkit-linear-gradient(left,  #d0d0d0 0%, #d0d0d0 "+parseInt(a)+"%, rgba(255,255,255, 0.45) "+(parseInt(a)+1)+"%, rgba(255,255,255, 0.45) 100%);background: linear-gradient(to right,  #d0d0d0 0%, #d0d0d0 "+parseInt(a)+"%, rgba(255,255,255, 0.45) "+(parseInt(a)+1)+"%, rgba(255,255,255, 0.45) 100%);":"";return b}),f.StartCounter=function(a,b){a===!0&&(console.log("new Building timer!"),SpaceGame.apiStatus("fetch"),$.ajax({url:"api/start_upgrade_user_building.php",data:{userbuildingid:f.userBuildingId(),startBuildingTime:(new Date).getTime()},cache:!1}).done(function(a){console.log(a),JSON3.parse(a),SpaceGame.apiStatus("done"),console.log("started!!")}).error(function(a){console.log("NEW AJAX ERROR!",a)})),f.elapsedTime(b),f.isRunning(!0),f.timerId=window.setInterval(function(){f.elapsedTime(f.elapsedTime()+1),f.remainingTime()<=0&&(clearInterval(f.timerId),f.isRunning(!1),f.UpgradeBuilding())},1e3)},f.StopCounter=function(){clearInterval(f.timerId),f.isRunning(!1)},f.UpgradeBuilding=function(){f.level(f.level()+1),SpaceGame.apiStatus("fetch"),$.ajax({url:"api/upgrade_user_building.php",data:{userbuildingid:f.userBuildingId(),level:f.level()},cache:!1}).done(function(a){console.log(a),JSON3.parse(a),SpaceGame.apiStatus("done"),console.log("upgraded!!")}).error(function(a){console.log("NEW AJAX ERROR!",a)})},0!==f.upgradeStartTime()){var g=(new Date).getTime();if(g-(f.upgradeStartTime()+1e3*f.realBuildTime())<0){console.log("buildtime:",(new Date).getTime()-(f.upgradeStartTime()+1e3*f.realBuildTime()));var h=parseInt((g-f.upgradeStartTime())/1e3);f.StartCounter(!1,h)}else f.UpgradeBuilding()}}function DB_Building(a){var b=this;b.id=ko.observable(a.id),b.name=ko.observable(a.name),b.description=ko.observable(a.description),b.buildTime=ko.observable(a.buildTime),b.buildTimeMultiplier=ko.observable(a.buildTimeMultiplier),b.powerMultiplier=ko.observable(a.powerMultiplier),b.resourceMultiplier=ko.observable(a.resourceMultiplier),b.powers=ko.observableArray(),b.resources=ko.observableArray(),$.each(a.powers,function(a,c){b.powers.push(new DB_BuildingResource(c))}),$.each(a.resources,function(a,c){b.resources.push(new DB_BuildingResource(c))}),b.realBuildTime=ko.computed(function(){var a=SpaceGame.calculat_build_time(b.buildTime(),b.buildTimeMultiplier(),0);return a}),b.buildTimeText=ko.computed(function(){return"build time: "+SpaceGame.buildTimeString(b.realBuildTime())}),b.startBuilding=function(a,b){console.log("addNewUserBuilding",b,a);var c=(new Date).getTime();SpaceGame.apiStatus("fetch"),$.ajax({url:"api/add_edit_user_building.php",data:{buildingid:a.id(),userbuildingid:"",level:"0",timestamp:c},cache:!1}).done(function(b){console.log(b);var d=JSON3.parse(b);SpaceGame.user_buildings.push(new USER_Building(a,!1,c,d.userBuildingId,0)),SpaceGame.apiStatus("done")}).error(function(a){console.log("NEW AJAX ERROR!",a)})}}function DB_BuildingResource(a){var b=this;b.resourceId=ko.observable(a.resourceId),b.value=ko.observable(a.value)}function DB_Resource(a){var b=this;b.id=ko.observable(a.id),b.name=ko.observable(a.name),b.description=ko.observable(a.description)}function USER_Building(a,b,c,d,e){var f=this;if(b?console.log("USER_Building fromDb"):console.log("USER_Building from knockoutObject"),f.id=ko.observable(a.id()),f.userBuildingId=ko.observable(d),f.level=ko.observable(parseInt(e)),f.name=ko.observable(a.name()),f.description=ko.observable(a.description()),f.buildTime=ko.observable(a.buildTime()),f.buildTimeMultiplier=ko.observable(a.buildTimeMultiplier()),f.powerMultiplier=ko.observable(a.powerMultiplier()),f.resourceMultiplier=ko.observable(a.resourceMultiplier()),f.powers=ko.observableArray(),f.resources=ko.observableArray(),$.each(a.powers(),function(a,b){f.powers.push(new DB_BuildingResource(b))}),$.each(a.resources(),function(a,b){f.resources.push(new DB_BuildingResource(b))}),f.realBuildTime=ko.computed(function(){var a=SpaceGame.calculat_build_time(f.buildTime(),f.buildTimeMultiplier(),f.level());return a}),f.buildTimeText=ko.computed(function(){return"upgrade time: "+SpaceGame.buildTimeString(f.realBuildTime())}),f.upgradeStartTime=ko.observable(parseInt(c)),f.timerId=0,f.elapsedTime=ko.observable(0),f.initialTime=ko.computed(function(){return f.realBuildTime()}),f.remainingTime=ko.computed(function(){return f.initialTime()-f.elapsedTime()}),f.remainingTimeText=ko.computed(function(){return SpaceGame.buildTimeString(f.remainingTime())}),f.isRunning=ko.observable(!1),f.progressWidth=ko.computed(function(){var a=(100*f.elapsedTime()/f.initialTime()).toFixed(0),b=f.isRunning()?"background: -moz-linear-gradient(left,  #d0d0d0 0%, #d0d0d0 "+parseInt(a)+"%, rgba(255,255,255, 0.45) "+(parseInt(a)+1)+"%, rgba(255,255,255, 0.45) 100%);background: -webkit-linear-gradient(left,  #d0d0d0 0%, #d0d0d0 "+parseInt(a)+"%, rgba(255,255,255, 0.45) "+(parseInt(a)+1)+"%, rgba(255,255,255, 0.45) 100%);background: linear-gradient(to right,  #d0d0d0 0%, #d0d0d0 "+parseInt(a)+"%, rgba(255,255,255, 0.45) "+(parseInt(a)+1)+"%, rgba(255,255,255, 0.45) 100%);":"";return b}),f.StartCounter=function(a,b){a===!0&&(console.log("new Building timer!"),SpaceGame.apiStatus("fetch"),$.ajax({url:"api/start_upgrade_user_building.php",data:{userbuildingid:f.userBuildingId(),startBuildingTime:(new Date).getTime()},cache:!1}).done(function(a){console.log(a);JSON3.parse(a);SpaceGame.apiStatus("done"),console.log("started!!")}).error(function(a){console.log("NEW AJAX ERROR!",a)})),f.elapsedTime(b),f.isRunning(!0),f.timerId=window.setInterval(function(){f.elapsedTime(f.elapsedTime()+1),f.remainingTime()<=0&&(clearInterval(f.timerId),f.isRunning(!1),f.UpgradeBuilding())},1e3)},f.StopCounter=function(){clearInterval(f.timerId),f.isRunning(!1)},f.UpgradeBuilding=function(){f.level(f.level()+1),SpaceGame.apiStatus("fetch"),$.ajax({url:"api/upgrade_user_building.php",data:{userbuildingid:f.userBuildingId(),level:f.level()},cache:!1}).done(function(a){console.log(a);JSON3.parse(a);SpaceGame.apiStatus("done"),console.log("upgraded!!")}).error(function(a){console.log("NEW AJAX ERROR!",a)})},0!==f.upgradeStartTime()){var g=(new Date).getTime();if(g-(f.upgradeStartTime()+1e3*f.realBuildTime())<0){console.log("buildtime:",(new Date).getTime()-(f.upgradeStartTime()+1e3*f.realBuildTime()));var h=parseInt((g-f.upgradeStartTime())/1e3);f.StartCounter(!1,h)}else f.UpgradeBuilding()}}console.log("start"),SpaceGame=function(){SpaceGame.apiStatus=ko.observable(),SpaceGame.db_buildings=ko.observableArray(),SpaceGame.db_resources=ko.observableArray(),SpaceGame.user_buildings=ko.observableArray(),SpaceGame.apiStatus("fetch"),SpaceGame.load_db_buildings=function(a){SpaceGame.apiStatus("fetch"),$.ajax({url:"api/init_db_data.php",data:{},cache:!1}).done(function(a){var b=JSON3.parse(a);SpaceGame.db_buildings.removeAll(),$.each(b.db_buildings,function(a,b){SpaceGame.db_buildings.push(new DB_Building(b)),console.log(a,b)}),$.each(b.resources,function(a,b){SpaceGame.db_resources.push(new DB_Resource(b)),console.log(a,b)}),SpaceGame.load_user_buildings()}).error(function(a){console.log("NEW AJAX ERROR!",a)})},SpaceGame.load_db_buildings(),SpaceGame.load_user_buildings=function(a){SpaceGame.apiStatus("fetch"),$.ajax({url:"api/init_user_data.php",data:{},cache:!1}).done(function(a){var b=JSON3.parse(a);SpaceGame.user_buildings.removeAll(),$.each(b.user_buildings,function(a,b){SpaceGame.user_buildings.push(new USER_Building(SpaceGame.db_buildings()[b.buildingId],!0,b.startBuildingTime,b.id,b.level)),console.log(a,b)}),SpaceGame.apiStatus("done")}).error(function(a){console.log("NEW AJAX ERROR!",a)})},SpaceGame.calculat_build_time=function(a,b,c){c++;var d=Math.floor(a*c+Math.pow(a,c/b));return console.log("calc",d),d},SpaceGame.buildTimeString=function(a){var b="";return b=a>86400?(a/60/60/24).toFixed(1)+"d":a>3600?(a/60/60).toFixed(1)+"h":a>60?(a/60).toFixed(1)+"m":a+"s"}},ko.applyBindings(SpaceGame),console.log("start"),SpaceGame=function(){SpaceGame.apiStatus=ko.observable(),SpaceGame.db_buildings=ko.observableArray(),SpaceGame.db_resources=ko.observableArray(),SpaceGame.user_buildings=ko.observableArray(),SpaceGame.apiStatus("fetch"),SpaceGame.load_db_buildings=function(a){SpaceGame.apiStatus("fetch"),$.ajax({url:"api/init_db_data.php",data:{},cache:!1}).done(function(a){var b=JSON3.parse(a);SpaceGame.db_buildings.removeAll(),$.each(b.db_buildings,function(a,b){SpaceGame.db_buildings.push(new DB_Building(b)),console.log(a,b)}),$.each(b.resources,function(a,b){SpaceGame.db_resources.push(new DB_Resource(b)),console.log(a,b)}),SpaceGame.load_user_buildings()}).error(function(a){console.log("NEW AJAX ERROR!",a)})},SpaceGame.load_db_buildings(),SpaceGame.load_user_buildings=function(a){SpaceGame.apiStatus("fetch"),$.ajax({url:"api/init_user_data.php",data:{},cache:!1}).done(function(a){var b=JSON3.parse(a);SpaceGame.user_buildings.removeAll(),$.each(b.user_buildings,function(a,b){SpaceGame.user_buildings.push(new USER_Building(SpaceGame.db_buildings()[b.buildingId],!0,b.startBuildingTime,b.id,b.level)),console.log(a,b)}),SpaceGame.apiStatus("done")}).error(function(a){console.log("NEW AJAX ERROR!",a)})},SpaceGame.calculat_build_time=function(a,b,c){c++;var d=Math.floor(a*c+Math.pow(a,c/b));return console.log("calc",d),d},SpaceGame.buildTimeString=function(a){var b="";return b=a>86400?(a/60/60/24).toFixed(1)+"d":a>3600?(a/60/60).toFixed(1)+"h":a>60?(a/60).toFixed(1)+"m":a+"s"}},ko.applyBindings(SpaceGame),console.log("start"),SpaceGame=function(){SpaceGame.apiStatus=ko.observable(),SpaceGame.db_buildings=ko.observableArray(),SpaceGame.db_resources=ko.observableArray(),SpaceGame.user_buildings=ko.observableArray(),SpaceGame.apiStatus("fetch"),SpaceGame.load_db_buildings=function(a){SpaceGame.apiStatus("fetch"),$.ajax({url:"api/init_db_data.php",data:{},cache:!1}).done(function(a){var b=JSON3.parse(a);SpaceGame.db_buildings.removeAll(),$.each(b.db_buildings,function(a,b){SpaceGame.db_buildings.push(new DB_Building(b)),console.log(a,b)}),$.each(b.resources,function(a,b){SpaceGame.db_resources.push(new DB_Resource(b)),console.log(a,b)}),SpaceGame.load_user_buildings()}).error(function(a){console.log("NEW AJAX ERROR!",a)})},SpaceGame.load_db_buildings(),SpaceGame.load_user_buildings=function(a){SpaceGame.apiStatus("fetch"),$.ajax({url:"api/init_user_data.php",data:{},cache:!1}).done(function(a){var b=JSON3.parse(a);SpaceGame.user_buildings.removeAll(),$.each(b.user_buildings,function(a,b){SpaceGame.user_buildings.push(new USER_Building(SpaceGame.db_buildings()[b.buildingId],!0,b.startBuildingTime,b.id,b.level)),console.log(a,b)}),SpaceGame.apiStatus("done")}).error(function(a){console.log("NEW AJAX ERROR!",a)})},SpaceGame.calculat_build_time=function(a,b,c){c++;var d=Math.floor(a*c+Math.pow(a,c/b));return console.log("calc",d),d},SpaceGame.buildTimeString=function(a){var b="";return b=a>86400?(a/60/60/24).toFixed(1)+"d":a>3600?(a/60/60).toFixed(1)+"h":a>60?(a/60).toFixed(1)+"m":a+"s"}},ko.applyBindings(SpaceGame),console.log("start"),SpaceGame=function(){SpaceGame.apiStatus=ko.observable(),SpaceGame.db_buildings=ko.observableArray(),SpaceGame.db_resources=ko.observableArray(),SpaceGame.user_buildings=ko.observableArray(),SpaceGame.apiStatus("fetch"),SpaceGame.load_db_buildings=function(a){SpaceGame.apiStatus("fetch"),$.ajax({url:"api/init_db_data.php",data:{},cache:!1}).done(function(a){var b=JSON3.parse(a);SpaceGame.db_buildings.removeAll(),$.each(b.db_buildings,function(a,b){SpaceGame.db_buildings.push(new DB_Building(b)),console.log(a,b)}),$.each(b.resources,function(a,b){SpaceGame.db_resources.push(new DB_Resource(b)),console.log(a,b)}),SpaceGame.load_user_buildings()}).error(function(a){console.log("NEW AJAX ERROR!",a)})},SpaceGame.load_db_buildings(),SpaceGame.load_user_buildings=function(a){SpaceGame.apiStatus("fetch"),$.ajax({url:"api/init_user_data.php",data:{},cache:!1}).done(function(a){var b=JSON3.parse(a);SpaceGame.user_buildings.removeAll(),$.each(b.user_buildings,function(a,b){SpaceGame.user_buildings.push(new USER_Building(SpaceGame.db_buildings()[b.buildingId],!0,b.startBuildingTime,b.id,b.level)),console.log(a,b)}),SpaceGame.apiStatus("done")}).error(function(a){console.log("NEW AJAX ERROR!",a)})},SpaceGame.calculat_build_time=function(a,b,c){c++;var d=Math.floor(a*c+Math.pow(a,c/b));return console.log("calc",d),d},SpaceGame.buildTimeString=function(a){var b="";return b=a>86400?(a/60/60/24).toFixed(1)+"d":a>3600?(a/60/60).toFixed(1)+"h":a>60?(a/60).toFixed(1)+"m":a+"s"}},ko.applyBindings(SpaceGame),console.log("start"),SpaceGame=function(){SpaceGame.apiStatus=ko.observable(),SpaceGame.db_buildings=ko.observableArray(),SpaceGame.db_resources=ko.observableArray(),SpaceGame.user_buildings=ko.observableArray(),SpaceGame.apiStatus("fetch"),SpaceGame.load_db_buildings=function(a){SpaceGame.apiStatus("fetch"),$.ajax({url:"api/init_db_data.php",data:{},cache:!1}).done(function(a){var b=JSON3.parse(a);SpaceGame.db_buildings.removeAll(),$.each(b.db_buildings,function(a,b){SpaceGame.db_buildings.push(new DB_Building(b)),console.log(a,b)}),$.each(b.resources,function(a,b){SpaceGame.db_resources.push(new DB_Resource(b)),console.log(a,b)}),SpaceGame.load_user_buildings()}).error(function(a){console.log("NEW AJAX ERROR!",a)})},SpaceGame.load_db_buildings(),SpaceGame.load_user_buildings=function(a){SpaceGame.apiStatus("fetch"),$.ajax({url:"api/init_user_data.php",data:{},cache:!1}).done(function(a){var b=JSON3.parse(a);SpaceGame.user_buildings.removeAll(),$.each(b.user_buildings,function(a,b){SpaceGame.user_buildings.push(new USER_Building(SpaceGame.db_buildings()[b.buildingId],!0,b.startBuildingTime,b.id,b.level)),console.log(a,b)}),SpaceGame.apiStatus("done")}).error(function(a){console.log("NEW AJAX ERROR!",a)})},SpaceGame.calculat_build_time=function(a,b,c){c++;var d=Math.floor(a*c+Math.pow(a,c/b));return console.log("calc",d),d},SpaceGame.buildTimeString=function(a){var b="";return b=a>86400?(a/60/60/24).toFixed(1)+"d":a>3600?(a/60/60).toFixed(1)+"h":a>60?(a/60).toFixed(1)+"m":a+"s"}},ko.applyBindings(SpaceGame),console.log("start"),SpaceGame=function(){SpaceGame.apiStatus=ko.observable(),SpaceGame.db_buildings=ko.observableArray(),SpaceGame.db_resources=ko.observableArray(),SpaceGame.user_buildings=ko.observableArray(),SpaceGame.apiStatus("fetch"),SpaceGame.load_db_buildings=function(a){SpaceGame.apiStatus("fetch"),$.ajax({url:"api/init_db_data.php",data:{},cache:!1}).done(function(a){var b=JSON3.parse(a);SpaceGame.db_buildings.removeAll(),$.each(b.db_buildings,function(a,b){SpaceGame.db_buildings.push(new DB_Building(b)),console.log(a,b)}),$.each(b.resources,function(a,b){SpaceGame.db_resources.push(new DB_Resource(b)),console.log(a,b)}),SpaceGame.load_user_buildings()}).error(function(a){console.log("NEW AJAX ERROR!",a)})},SpaceGame.load_db_buildings(),SpaceGame.load_user_buildings=function(a){SpaceGame.apiStatus("fetch"),$.ajax({url:"api/init_user_data.php",data:{},cache:!1}).done(function(a){var b=JSON3.parse(a);SpaceGame.user_buildings.removeAll(),$.each(b.user_buildings,function(a,b){SpaceGame.user_buildings.push(new USER_Building(SpaceGame.db_buildings()[b.buildingId],!0,b.startBuildingTime,b.id,b.level)),console.log(a,b)}),SpaceGame.apiStatus("done")}).error(function(a){console.log("NEW AJAX ERROR!",a)})},SpaceGame.calculat_build_time=function(a,b,c){c++;var d=Math.floor(a*c+Math.pow(a,c/b));return console.log("calc",d),d},SpaceGame.buildTimeString=function(a){var b="";return b=a>86400?(a/60/60/24).toFixed(1)+"d":a>3600?(a/60/60).toFixed(1)+"h":a>60?(a/60).toFixed(1)+"m":a+"s"}},ko.applyBindings(SpaceGame),console.log("start"),SpaceGame=function(){SpaceGame.apiStatus=ko.observable(),SpaceGame.db_buildings=ko.observableArray(),SpaceGame.db_resources=ko.observableArray(),SpaceGame.user_buildings=ko.observableArray(),SpaceGame.apiStatus("fetch"),SpaceGame.load_db_buildings=function(a){SpaceGame.apiStatus("fetch"),$.ajax({url:"api/init_db_data.php",data:{},cache:!1}).done(function(a){var b=JSON3.parse(a);SpaceGame.db_buildings.removeAll(),$.each(b.db_buildings,function(a,b){SpaceGame.db_buildings.push(new DB_Building(b)),console.log(a,b)}),$.each(b.resources,function(a,b){SpaceGame.db_resources.push(new DB_Resource(b)),console.log(a,b)}),SpaceGame.load_user_buildings()}).error(function(a){console.log("NEW AJAX ERROR!",a)})},SpaceGame.load_db_buildings(),SpaceGame.load_user_buildings=function(a){SpaceGame.apiStatus("fetch"),$.ajax({url:"api/init_user_data.php",data:{},cache:!1}).done(function(a){var b=JSON3.parse(a);SpaceGame.user_buildings.removeAll(),$.each(b.user_buildings,function(a,b){SpaceGame.user_buildings.push(new USER_Building(SpaceGame.db_buildings()[b.buildingId],!0,b.startBuildingTime,b.id,b.level)),console.log(a,b)}),SpaceGame.apiStatus("done")}).error(function(a){console.log("NEW AJAX ERROR!",a)})},SpaceGame.calculat_build_time=function(a,b,c){c++;var d=Math.floor(a*c+Math.pow(a,c/b));return console.log("calc",d),d},SpaceGame.buildTimeString=function(a){var b="";return b=a>86400?(a/60/60/24).toFixed(1)+"d":a>3600?(a/60/60).toFixed(1)+"h":a>60?(a/60).toFixed(1)+"m":a+"s"}},ko.applyBindings(SpaceGame),console.log("start"),SpaceGame=function(){SpaceGame.apiStatus=ko.observable(),SpaceGame.db_buildings=ko.observableArray(),SpaceGame.db_resources=ko.observableArray(),SpaceGame.user_buildings=ko.observableArray(),SpaceGame.apiStatus("fetch"),SpaceGame.load_db_buildings=function(a){SpaceGame.apiStatus("fetch"),$.ajax({url:"api/init_db_data.php",data:{},cache:!1}).done(function(a){var b=JSON3.parse(a);SpaceGame.db_buildings.removeAll(),$.each(b.db_buildings,function(a,b){SpaceGame.db_buildings.push(new DB_Building(b)),console.log(a,b)}),$.each(b.resources,function(a,b){SpaceGame.db_resources.push(new DB_Resource(b)),console.log(a,b)}),SpaceGame.load_user_buildings()}).error(function(a){console.log("NEW AJAX ERROR!",a)})},SpaceGame.load_db_buildings(),SpaceGame.load_user_buildings=function(a){SpaceGame.apiStatus("fetch"),$.ajax({url:"api/init_user_data.php",data:{},cache:!1}).done(function(a){var b=JSON3.parse(a);SpaceGame.user_buildings.removeAll(),$.each(b.user_buildings,function(a,b){SpaceGame.user_buildings.push(new USER_Building(SpaceGame.db_buildings()[b.buildingId],!0,b.startBuildingTime,b.id,b.level)),console.log(a,b)}),SpaceGame.apiStatus("done")}).error(function(a){console.log("NEW AJAX ERROR!",a)})},SpaceGame.calculat_build_time=function(a,b,c){c++;var d=Math.floor(a*c+Math.pow(a,c/b));return console.log("calc",d),d},SpaceGame.buildTimeString=function(a){var b="";return b=a>86400?(a/60/60/24).toFixed(1)+"d":a>3600?(a/60/60).toFixed(1)+"h":a>60?(a/60).toFixed(1)+"m":a+"s"}},ko.applyBindings(SpaceGame),console.log("start"),SpaceGame=function(){SpaceGame.apiStatus=ko.observable(),SpaceGame.db_buildings=ko.observableArray(),SpaceGame.db_resources=ko.observableArray(),SpaceGame.user_buildings=ko.observableArray(),SpaceGame.apiStatus("fetch"),SpaceGame.load_db_buildings=function(a){SpaceGame.apiStatus("fetch"),$.ajax({url:"api/init_db_data.php",data:{},cache:!1}).done(function(a){var b=JSON3.parse(a);SpaceGame.db_buildings.removeAll(),$.each(b.db_buildings,function(a,b){SpaceGame.db_buildings.push(new DB_Building(b)),console.log(a,b)}),$.each(b.resources,function(a,b){SpaceGame.db_resources.push(new DB_Resource(b)),console.log(a,b)}),SpaceGame.load_user_buildings()}).error(function(a){console.log("NEW AJAX ERROR!",a)})},SpaceGame.load_db_buildings(),SpaceGame.load_user_buildings=function(a){SpaceGame.apiStatus("fetch"),$.ajax({url:"api/init_user_data.php",data:{},cache:!1}).done(function(a){var b=JSON3.parse(a);SpaceGame.user_buildings.removeAll(),$.each(b.user_buildings,function(a,b){SpaceGame.user_buildings.push(new USER_Building(SpaceGame.db_buildings()[b.buildingId],!0,b.startBuildingTime,b.id,b.level)),console.log(a,b)}),SpaceGame.apiStatus("done")}).error(function(a){console.log("NEW AJAX ERROR!",a)})},SpaceGame.calculat_build_time=function(a,b,c){c++;var d=Math.floor(a*c+Math.pow(a,c/b));return console.log("calc",d),d},SpaceGame.buildTimeString=function(a){var b="";return b=a>86400?(a/60/60/24).toFixed(1)+"d":a>3600?(a/60/60).toFixed(1)+"h":a>60?(a/60).toFixed(1)+"m":a+"s"}},ko.applyBindings(SpaceGame);